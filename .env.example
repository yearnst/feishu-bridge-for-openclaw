# Feishu / Lark
FEISHU_APP_ID=
FEISHU_APP_SECRET=

# Event Subscription
# Webhook mode:
# - If you enabled Verification Token in Feishu console, fill it here.
# - If you enabled Encrypt Key in Feishu console, fill it here (32-byte string).
#   This project supports encrypted callbacks (payload shape: {"encrypt":"..."}).
# Socket mode: these are not required.
FEISHU_VERIFICATION_TOKEN=
FEISHU_ENCRYPT_KEY=

# Behavior
# Only reply in groups when bot is @mentioned
REQUIRE_MENTION_IN_GROUP=true

# Temporary fallback: echo mode (for testing Feishu wiring)
ECHO_MODE=true

# Where to store inbound downloaded Feishu files/images
FEISHU_DOWNLOAD_DIR=./downloads
# Safety limit (bytes)
FEISHU_MAX_DOWNLOAD_BYTES=31457280

# Ensure generated PDFs embed a CJK-capable font to avoid garbled Chinese.
# PDF font (avoid garbled Chinese in generated PDFs)
# This repo includes a redistributable font under ./fonts/
PDF_CJK_FONT_PATH=./fonts/NotoSansCJKsc-Regular.otf

# Assistant runner (Clawdbot legacy / OpenClaw new)
# OpenClaw is the renamed successor of Clawdbot: https://github.com/openclaw/openclaw
#
# By default (ASSISTANT_MODE=auto), the bridge tries to run `openclaw` first, then `clawdbot`.
# You can override explicitly:
# - ASSISTANT_MODE=cli  + ASSISTANT_BIN=openclaw|clawdbot
# - ASSISTANT_MODE=entry + CLAWDBOT_ENTRY=/abs/path/to/legacy/entry.js
ASSISTANT_MODE=auto
ASSISTANT_BIN=
CLAWDBOT_ENTRY=

# "Never timeout" UX:
# Optional hard timeout (ms). 0 disables hard timeout.
CLAWDBOT_HARD_TIMEOUT_MS=0

# Delayed processing hint (task-id)
SEND_PROCESSING_HINT=true
# Only send the task-id hint if there has been no user-visible output within this delay.
PROCESSING_HINT_DELAY_MS=120000

# Optional progress ping while running (ms). 0 disables.
PROGRESS_PING_MS=120000

# Group media pairing / caching
# Cache recent inbound media (images/files) for a short time so a later @mention can reference it.
PENDING_INBOUND_TTL_MS=90000
# Brief wait window to pair @mentions with nearby media messages (ms)
MENTION_MEDIA_WAIT_MS=1500
# Implicit pairing window for "send media then just @" (ms)
IMPLICIT_PAIR_WINDOW_MS=5000

# Optional group context cache (for later @mentions)
GROUP_CACHE_ENABLED=false
GROUP_CACHE_MAX_ITEMS=50

PORT=8787

# Receive mode: webhook | socket | both
# Default is socket if not set.
FEISHU_RECEIVE_MODE=socket

# Whether to start the local HTTP server (Express).
# - webhook: must be true
# - socket: can be false
# - both: true
HTTP_SERVER_ENABLED=false

# Startup self-check (ms): if no inbound events received within this time,
# print a helpful troubleshooting hint. 0 disables.
STARTUP_SELF_CHECK_MS=30000
